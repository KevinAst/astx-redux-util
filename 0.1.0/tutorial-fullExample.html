<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>A Most Excellent Example - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>User Guide</h3><ul><li><a href="tutorial-start.html">Getting Started</a></li><li><a href="tutorial-conceptHash.html">Basics</a></li><li><a href="tutorial-conceptConditional.html">Conditional Reduction</a></li><li><a href="tutorial-conceptJoin.html">Joining Reducers</a></li><li><a href="tutorial-fullExample.html">A Most Excellent Example</a></li><li><a href="tutorial-why.html">Why astx-redux-util?</a></li><li><a href="tutorial-logExt.html">Logging Extension</a></li><li><a href="tutorial-originalReducerState.html">originalReducerState</a></li><li><a href="tutorial-LICENSE.html">MIT License</a></li></ul><h3>astx-redux-util</h3><ul><li><a href="global.html#conditionalReducer">conditionalReducer</a></li><li><a href="global.html#joinReducers">joinReducers</a></li><li><a href="global.html#reducerHash">reducerHash</a></li><li><a href="global.html#reducerPassThrough">reducerPassThrough</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">A Most Excellent Example</h1>
    

    <section>

<header>
    

    <!-- KJB: removed level 2 header
    <h2>A Most Excellent Example</h2>
    -->
</header>

<article>
    <p>If we take our widget example one step further (from our <a href="tutorial-conceptJoin.html">Joining Reducers</a> discussion), let's say in addition to the x/y properties,
we now introduce a curHash - which is a determinate of whether
application content has changed.</p>
<pre class="prettyprint source lang-JavaScript"><code>{
  widget: {
    x:       100,
    y:       200,
    curHash: 'IEFBR14'
  }
}</code></pre><p>Our widget reducer is the obvious choice to maintain this curHash.  It
has a unique vantage point for this task, because it is a central
clearing house that has knowledge anytime the widget state changes.
This is even independent of how many properties the widget has!  Our
immutable pattern dictates that if our state changes, a new instance
will be introduced.  Therefore, we can safely change the curHash anytime
the widget instance has changed.</p>
<p>Building on our last example (in <a href="tutorial-conceptJoin.html">Joining Reducers</a>), we can
accomplish this new requirement by simply adding yet another reducer
to our reduceWidget function.</p>
<pre class="prettyprint source lang-JavaScript"><code>import * as Redux         from 'redux';
import * as AstxReduxUtil from 'astx-redux-util';
import x                  from './myAppReducer.x';
import y                  from './myAppReducer.y';
import Widget             from './myWidgetUtil';

const reduceWidget = 
  AstxReduxUtil.joinReducers(
    // first: determine content shape (i.e. null or {})
    AstxReduxUtil.reducerHash({
      ['widget.edit']       (widget, action) => action.widget,
      ['widget.edit.close'] (widget, action) => null
    }),

    // next ...
    AstxReduxUtil.conditionalReducer(
      // ... when widget is being edited (i.e. has content)
      (widget, action, originalReducerState) => widget !== null,
      AstxReduxUtil.joinReducers(
        // maintain individual x/y fields
        Redux.combineReducers({
          x,
          y
        }),
        // ... NEW from last example
        AstxReduxUtil.conditionalReducer(
          // ... when widget has changed
          (widget, action, originalReducerState) => originalReducerState !== widget,
          // maintain curHash
          (widget, action) => {
            widget.curHash = Widget.hash(widget); // NOTE: OK to mutate (different instance)
            return widget;
          })
        )
      )
  );

export default function widget(widget=null, action) {
  return reduceWidget(widget, action);
}</code></pre><p>This represents a very comprehensive example of how <strong>Reducer
Composition</strong> can <strong>simplify your life</strong>!  We have combined 3
sub-reducers into one, applying conditional logic as needed through
functional decomposition!</p>
<p><strong>Please NOTE</strong>:</p>
<ol>
<li><p>The <a href="tutorial-originalReducerState.html">originalReducerState</a> is used to determine when the
widget has changed from ANY of the prior sub-reducers (see the
discussion of this topic in the provided link).</p>
</li>
<li><p>The curHash should only be maintained when the widget has content
(i.e. non-null).  This is accomplished through the <strong>nesting</strong> of
conditionalReducer (the outer one insures the widget is non-null).</p>
</li>
<li><p>Contrary to any <strong>red flags</strong> that may have been raised on your
initial glance of the code, <strong>it is OK</strong> to mutate the <code>widget</code>
state in the last reducer, because we know one of the prior
reducers has injected a new widget instance (via the
<code>originalReducerState !== widget</code> condition).</p>
</li>
</ol>
<p><strong>Life is GOOD!</strong></p>
</article>

</section>

</div>

<br class="clear">

<footer>
    <!-- KJB START: injected the package name/version -->
    
    <b>
      astx-redux-util 
     (0.1.0)
    </b>
    &hellip;
<a href="./tutorial-LICENSE.html">MIT License</a>
&hellip;
Copyright &copy; 2017 Kevin Bridges
<a href="https://github.com/KevinAst/astx-redux-util">
  <img src="https://assets-cdn.github.com/images/modules/logos_page/GitHub-Mark.png"
       alt="GitHub"
       title="astx-redux-util on GitHub"
       height="18">
</a>
<a href="https://www.npmjs.com/package/astx-redux-util">
  <img src="https://upload.wikimedia.org/wikipedia/commons/d/db/Npm-logo.svg"
       alt="npm"
       title="astx-redux-util on npm"
       height="12">
</a>
 
    
    <!-- KJB END -->

    <!-- KJB: modified following slightly -->
    <!-- 
    docs generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> using an enhanced <a href="https://github.com/clenemt/docdash">docdash</a> theme.
    -->
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>